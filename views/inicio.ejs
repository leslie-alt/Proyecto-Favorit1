<%- include ("templates/header.ejs", {titulo:"INICIO"}) %> 
  <h1 class="text-primary">INICIO</h1>

   

   <div class="container mt-4">
       <% categorias.forEach(function(categoria) { %>
         <div class="category-section mb-5">
           <h3 class="mb-3"><%= categoria.nombre %></h3>
           <table class="table table-striped">
             <thead>
               <tr>
                 <th>Nombre</th>
                 <th>Calificación</th>
                 <th>Acciones</th>
               </tr>
             </thead>
             <tbody>
    <% const articulosCategoria = articulos.filter(art => 
        art.categoria && 
        art.categoria._id && 
        art.categoria._id.toString() === categoria._id.toString()
    ) %>
    <% if(articulosCategoria.length > 0) { %>
        <% articulosCategoria.forEach(function(articulo) { %>
            <tr>
                <td><%= articulo.nombre %></td>
                <td><%= articulo.calificacion %></td>
                <td>
                    <a href="/editar/<%= articulo._id %>" class="btn btn-warning btn-sm">Editar</a>
                    <a href="/eliminarArticulo/<%= articulo._id %>" class="btn btn-danger btn-sm">Eliminar</a>
                </td>
            </tr>
        <% }); %>
    <% } else { %>
        <tr>
            <td colspan="3" class="text-center">No hay artículos en esta categoría</td>
        </tr>
    <% } %>
</tbody>
           </table>
         </div>
       <% }); %>
   </div>

<%- include ("templates/footer.ejs") %>



